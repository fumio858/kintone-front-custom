(()=>{var e={342:(e,n,t)=>{var o={"./calendar_customization.js":730,"./dynamic_related_records.js":936,"./index.js":904};function r(e){var n=s(e);return t(n)}function s(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=342},730:()=>{!function(){"use strict";const e=[23],n="case_type",t="task_status",o="case_id",r={åˆ‘äº‹äº‹ä»¶:"#FFDCDC",äº¤é€šäº‹æ•…:"#DCEEFF",åˆ‘äº‹äº¤é€šä»¥å¤–:"#fff4ce","":"#F0F0F0",ãã®ä»–:"#F0F0F0"},s={åˆ‘äº‹äº‹ä»¶:22,äº¤é€šäº‹æ•…:26,åˆ‘äº‹äº¤é€šä»¥å¤–:55},c=e=>kintone.api.url(e.endsWith(".json")?e:`${e}.json`,!0);kintone.events.on(["app.record.index.show"],async i=>{if(!document.querySelector(".calendar-gaia"))return i;console.log("Calendar view detected. Applying color coding and link modification...");const a=document.querySelectorAll(".calendar-record-gaia");if(0===a.length)return i;const l=new Map;if(a.forEach(n=>{const t=n.querySelector("a");if(t){const n=t.href.match(/\/k\/(\d+)\/show#record=(\d+)/);if(n&&n[1]&&n[2]){const t=parseInt(n[1],10),o=n[2];e.includes(t)&&(l.has(t)||l.set(t,new Set),l.get(t).add(o))}}}),0===l.size)return i;const d=new Map;for(const[e,r]of l.entries()){const s=Array.from(r);if(0!==s.length)try{const r=`$id in (${s.join(",")})`;((await kintone.api(c("/k/v1/records"),"GET",{app:e,query:r,fields:["$id",n,t,o]})).records||[]).forEach(r=>{const s=`${e}_${r.$id.value}`;d.set(s,{caseType:r[n]?.value||"",taskStatus:r[t]?.value,caseId:r[o]?.value})})}catch(n){console.error(`ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ å–å¾—ã‚¨ãƒ©ãƒ¼ (App ID: ${e}):`,n)}}return a.forEach(e=>{const n=e.querySelector("a");if(n){const t=n.href.match(/\/k\/(\d+)\/show#record=(\d+)/);if(t&&t[1]&&t[2]){const o=parseInt(t[1],10),c=t[2],i=`${o}_${c}`,a=d.get(i);if(!a)return;const{caseType:l,taskStatus:p,caseId:u}=a,f=r[l]||r["ãã®ä»–"];f&&(e.style.backgroundColor=f,e.style.padding="2px 6px",e.style.margin="2px",e.style.borderRadius="3px",e.style.listStyle="none"),"å®Œäº†"===p&&e.classList.add("task-completed");const y=s[l];y&&u&&(n.href=`/k/${y}/show#record=${u}`,console.log(`Link rewritten for task ${c} to case ${u} in app ${y}`))}}}),console.log("Color coding and link modification applied successfully."),i})}()},904:(e,n,t)=>{var o;(o=t(342)).keys().forEach(o)},936:()=>{!function(){"use strict";const e="case_type",n="related_records_space",t="case_id",o={åˆ‘äº‹äº‹ä»¶:22,äº¤é€šäº‹æ•…:26,åˆ‘äº‹äº¤é€šä»¥å¤–:55},r="title_display";kintone.events.on(["app.record.detail.show"],async s=>{const c=s.record,i=kintone.app.record.getId(),a=c[e]?.value,l=c[t]?.value,d=kintone.app.record.getSpaceElement(n);if(!d)return console.warn(`ã‚¹ãƒšãƒ¼ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ '${n}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚`),s;d.innerHTML="",d.style.padding="10px",d.style.border="1px solid #e3e7e8",d.style.borderRadius="6px",d.style.backgroundColor="#f7f9fa",d.style.marginTop="1rem";const p=document.createElement("h4");p.style.margin="0 0 10px 0",p.style.borderBottom="1px solid #e3e7e8",p.style.paddingBottom="5px",p.textContent="ğŸ“„ é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰",d.appendChild(p);const u=document.createElement("div");if(d.appendChild(u),!a)return u.innerHTML='<p style="color:#c00;">åˆ†é‡ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“ã€‚</p>',s;if(!l)return u.innerHTML='<p style="color:#c00;">ç¾åœ¨ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®case_idãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“ã€‚</p>',s;const f=o[a];if(!f)return u.innerHTML=`<p>åˆ†é‡ '${a}' ã«å¯¾å¿œã™ã‚‹ã‚¢ãƒ—ãƒªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</p>`,s;try{u.innerHTML="<p>é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>";const e=`$id = "${l}"`;console.log("ç¾åœ¨ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ID:",i),console.log("ç¾åœ¨ã®åˆ†é‡:",a),console.log("ç¾åœ¨ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®case_id:",l),console.log("å¯¾è±¡ã‚¢ãƒ—ãƒªID:",f),console.log("æ¤œç´¢ã‚¯ã‚¨ãƒª:",e);const n=(await kintone.api((y="/k/v1/records",kintone.api.url(y.endsWith(".json")?y:`${y}.json`,!0)),"GET",{app:f,query:e,fields:["$id",r]})).records||[];if(0===n.length)u.innerHTML="<p>é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>";else{const e=document.createElement("ul");e.style.listStyle="none",e.style.padding="0",e.style.margin="0",n.forEach(n=>{const t=document.createElement("li");t.style.padding="5px";const o=n.$id.value,s=n[r]?.value||"(ã‚¿ã‚¤ãƒˆãƒ«ãªã—)",c=document.createElement("a");c.href=`${location.origin}/k/${f}/show#record=${o}`,c.target="_blank",c.textContent=s,c.style.textDecoration="none",c.style.color="#3598db",t.appendChild(c),e.appendChild(t)}),u.innerHTML="",u.appendChild(e)}}catch(e){console.error("é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰å–å¾—ã‚¨ãƒ©ãƒ¼:",e),u.innerHTML=`<p style="color:#c00;">é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${e.message||JSON.stringify(e)}</p>`}var y;return s}),kintone.events.on("app.record.detail.show",function(n){if(23!==n.appId)return n;console.log("Task record detail view detected. Preparing to show iframe...");const r=n.record,s=r[e]?.value,c=r[t]?.value,i=o[s];let a="";if(i&&c?a=`${location.origin}/k/${i}/show#record=${c}`:console.log("Required fields for iframe URL are missing (case_type or case_id)."),!a)return console.log("iframe URL is not defined. Skipping iframe creation."),n;const l="custom-iframe-container";let d=document.getElementById(l);if(d)d.innerHTML="";else{d=document.createElement("div"),d.id=l;const e=document.getElementById("record-gaia");if(!e)return console.warn("#record-gaia element not found. Cannot insert iframe container."),n;e.insertAdjacentElement("afterend",d)}const p=document.createElement("iframe");return p.src=a,p.width="100%",p.height="800px",p.style.border="none",n})}()}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var s=n[o]={exports:{}};return e[o](s,s.exports,t),s.exports}t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(904)})();